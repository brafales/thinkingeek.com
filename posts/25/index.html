<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Think In Geek</title>
  <meta name="description" content="In geek we trust">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://thinkingeek.com/posts/25/">
  
  
  <link rel="alternate" type="application/rss+xml" title="Think In Geek" href="https://thinkingeek.com/feed.xml">

  

  
  <meta property="og:title" content="Think In Geek">
  <meta property="og:site_name" content="Think In Geek">
  <meta property="og:url" content="https://thinkingeek.com/posts/25/">
  <meta property="og:description" content="In geek we trust">
  
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="Think In Geek">
  <meta name="twitter:description" content="In geek we trust">
  
  

  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700" rel="stylesheet">

  

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

      <span class="site-title"><a href="/">Think In Geek</a> | </span>
      <span class="site-slogan">In geek we trust</span>

    <nav class="site-nav"><a class="page-link" href="/arm-assembler-raspberry-pi/">Arm Assembler Raspberry Pi</a><a class="page-link" href="/gcc-tiny/">GCC tiny</a><a class="page-link" href="/author/brafales/">Posts by Bernat Ràfales</a><a class="page-link" href="/archives/">Archives</a></nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home">

  <ul class="post-list"><li>
        <header class="post-header">
          <h1 class="post-title"><a class="post-link" href="/2011/04/15/handling-resizing-in-adobe-air-with-html/">Handling resizing in Adobe Air with HTML</a></h1>

          <p class="post-meta">
            Apr 15, 2011• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Bernat Ràfales</span></span> • <a href="/categories/uncategorized/">Uncategorized</a> • <a href="/tags/adobe-air/">adobe air</a>, <a href="/tags/air/">air</a>, <a href="/tags/html/">html</a>, <a href="/tags/javascript/">javascript</a></p>
        </header>

        <div class="post-content">
          <p>
If you develop a widget with Adobe AIR using HTML and Javascript, you may want to resize some elements of the HTML page depending on the size of the widget, thus having to resize them when the user decides to resize the widget. However, there's a little trick on using the <em>RESIZE</em> event of the <em>air.Event</em> object.
</p>
<p>
The trick is that when the event is raised, and you execute some method on the corresponding event handler, the widget won't have the correct size yet, so if you use the <em>window.nativeWindow.width</em> or <em>window.nativeWindow.height</em> values there you'll be getting erroneus results.
</p>
<p>
The solution is quite easy, though. You just have to let the HTML engine to adjust everything he needs to sort out the new sizes and get those attributes after that. How do you do that? By putting your code in a <em>setTimeout</em> call with 0 milliseconds timer. Here you can find an example (assuming use of jQuery):
</p>
<p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">nativeWindow</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">air</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">RESIZE</span><span class="p">,</span> <span class="nx">onResize</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">onResize</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nativeWin</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">nativeWindow</span><span class="p">;</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">nativeWin</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">nativeWin</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
    <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span> <span class="c1">//Here the values are correct</span></code></pre></figure>

</p>

        </div></li><li>
        <header class="post-header">
          <h1 class="post-title"><a class="post-link" href="/2011/03/29/limiting-the-suggestions-on-jqueryui-autocomplete-widget/">Limiting the suggestions on jQueryUI Autocomplete widget</a></h1>

          <p class="post-meta">
            Mar 29, 2011• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Bernat Ràfales</span></span> • <a href="/categories/uncategorized/">Uncategorized</a> • <a href="/tags/autocomplete/">autocomplete</a>, <a href="/tags/javascript/">javascript</a>, <a href="/tags/jquery/">jquery</a>, <a href="/tags/jqueryui/">jqueryUI</a></p>
        </header>

        <div class="post-content">
          <p>
If you ever used <a href="http://jqueryui.com/demos/autocomplete/">autocomplete.ui</a> plugin from <a href="http://jqueryui.com/">jQuery UI</a> and have an array with lots of suggestions you'll see that the solutions provided by the plugin are not always satisfactory. You can add a scrollbar to the suggestions box by using a CSS hack, but even with that, you'll have to render a big HTML that can be annoying on slow machines (mobile devices, for example).
</p>
<p>
I was working on a web site recently that had to be displayed on mobile devices and needed an autocomplete. But the suggestions array was big. A lot. This caused some problems on the mobile devices as they were behaving very slow, and the default plugin configuration doesn't allow you to specify a maximum number of items to show in the suggesstions box.
</p>
<p>
So I decided to do a dirty hack into the plugin code to add this behaviour, adding a <em>max</em> property to the options to be able to limit the number of suggestions to show.
</p>
<p>
It's not a perfect solution, because it should be implemented as a subclass or something, but if you need a fast solution, this is the way to go. You can find the code in my <a href="https://github.com/brafales/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js">GitHub repository fork of jQueryUI</a>. You can check the <a href="https://github.com/brafales/jquery-ui/commit/aa07a7e7604394098bb65abcb1afacb74615e01e">commit</a> to see the changes I made.
</p>

        </div><p class="post-continue">
            <a href="/2011/03/29/limiting-the-suggestions-on-jqueryui-autocomplete-widget/">Read on &rarr;</a>
          </p></li><li>
        <header class="post-header">
          <h1 class="post-title"><a class="post-link" href="/2011/03/11/jquery-bars-plugin/">jQuery Bars plugin</a></h1>

          <p class="post-meta">
            Mar 11, 2011• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Bernat Ràfales</span></span> • <a href="/categories/uncategorized/">Uncategorized</a> • <a href="/tags/bars/">bars</a>, <a href="/tags/html/">html</a>, <a href="/tags/javascript/">javascript</a>, <a href="/tags/jquery/">jquery</a></p>
        </header>

        <div class="post-content">
          <p>
I was developing an application recently that needed some king of horizontal bars to be drawn on a web page. I found the <a href="http://docs.jquery.com/UI/Progressbar">jQuery Progressbar</a> plugin and found it it was something similar to what I wanted to achieve, so I took some spare time and modified it to convert it in a plugin I could use in my app. The result is the <a href="https://github.com/brafales/jQuery-bars">jQuery Bars plugin</a>. It's a pretty simple plugin that will take a div and convert it into a horizontal bar, in which you can change the background color, the actual bar color, the duration of the animation and the height and width of the bar.
</p>
<p>
You can check a how it works and looks in this simple <a href="https://github.com/brafales/jQuery-bars/blob/master/test/test.html">test</a> I uploaded. It can be useful if you ever have to shown some kind of a percentage bar in a chart and you need a bit more customization that jQuery UI Progressbar gives you.
</p>
<p>
The plugin is dual licensed in MIT and GPLv2, the same license as jQuery, so feel free to use it or modify it at your will.
</p>


        </div></li><li>
        <header class="post-header">
          <h1 class="post-title"><a class="post-link" href="/2011/03/09/create-your-own-jsonp-proxy-using-ruby-on-rails/">Create your own JSONP Proxy using Ruby on Rails</a></h1>

          <p class="post-meta">
            Mar 9, 2011• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Bernat Ràfales</span></span> • <a href="/categories/uncategorized/">Uncategorized</a> • <a href="/tags/jsonp/">jsonp</a>, <a href="/tags/rails/">rails</a>, <a href="/tags/ruby/">ruby</a>, <a href="/tags/ruby-on-rails/">ruby on rails</a></p>
        </header>

        <div class="post-content">
          <p>
Today I was working on a web site that needs to retrieve some RSS feed over the internet. Since the web page has no server (HTML + javascript only) I couldn't access the feed from the server side. Also, because of the Cross Domain limitation of Ajax requests, I couldn't access the RSS in the client either. I searched Google for an API and found the <a href="http://code.google.com/apis/feed/">Google Feed API</a>, which does exactly what I want. However, because (I think) Google caches the RSS feed you request, there was a significant delay (about half an hour) between the update of the RSS contents and the RSS provided by Google (the feed was updated in a per minute basis, as it was a CoverItLive event). Seeing I couldn't access really recent posts from the feed using Google, I decided to implement my own RSS API using JSONP in a ruby on rails environment, since having an external server act as a proxy was allowed for the overall solution.
</p>
<p>
The tools I needed I got from those two websites: <a href="http://rubyrss.com/">http://rubyrss.com/</a> for a RSS parser, and <a href="http://blogs.sitepoint.com/2006/10/05/json-p-output-with-rails/">http://blogs.sitepoint.com/2006/10/05/json-p-output-with-rails/</a> on how to build a simple JSONP response on the server side.
</p>
<p>
Basically you have to start creating a new controller that will handle the JSONP requests. In my case I just added a 'Feed' controller:
</p>
<p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>script/generate controller Feed</code></pre></figure>

</p>
<p>
Then you edit the <em>app/controllers/feed_controller.rb</em> file and start coding. We will assume that the request will come in this form: <em>http://server/feed/get?callback=some_callback&amp;url=the_url_of_the_feed</em>. Having this information, the controller code is pretty straightforward.
</p>
<p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">FeedController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  
  <span class="nb">require</span> <span class="s1">'rss/1.0'</span>
  <span class="nb">require</span> <span class="s1">'rss/2.0'</span>
  
  <span class="k">def</span> <span class="nf">get</span>
    <span class="k">begin</span>
      <span class="n">url_contents</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:url</span><span class="p">]))</span>
      <span class="n">rss</span> <span class="o">=</span> <span class="no">RSS</span><span class="o">::</span><span class="no">Parser</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">url_contents</span><span class="p">,</span> <span class="kp">false</span><span class="p">)</span>
      <span class="n">json</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"error"</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span> <span class="s2">"feed"</span> <span class="o">=&gt;</span> <span class="n">rss</span> <span class="p">}.</span><span class="nf">to_json</span>
    <span class="k">rescue</span>
      <span class="n">json</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"error"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="p">}.</span><span class="nf">to_json</span>
    <span class="k">end</span>
    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">js</span> <span class="p">{</span> <span class="n">render_json</span> <span class="n">json</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">render_json</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>
    <span class="n">callback</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:callback</span><span class="p">]</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">begin</span>
      <span class="k">if</span> <span class="n">callback</span>
        <span class="s2">"</span><span class="si">#{</span><span class="n">callback</span><span class="si">}</span><span class="s2">(</span><span class="si">#{</span><span class="n">json</span><span class="si">}</span><span class="s2">);"</span>
      <span class="k">else</span>
        <span class="n">json</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="n">render</span><span class="p">({</span><span class="ss">:content_type</span> <span class="o">=&gt;</span> <span class="ss">:js</span><span class="p">,</span> <span class="ss">:text</span> <span class="o">=&gt;</span> <span class="n">response</span><span class="p">})</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

</p>
<p>The first two lines are the requirements for the <em>RSS</em> module, which will allow us to parse a RSS feed. After that, we start with the <em>get</em> request. In there, we use the <em>Net::HTTP.get()</em> method, which will retrieve a URL content using a GET request and return its contents. To do so, we need to pass it an <em>uri</em> parameter, which we can get from the entire URL using the method <em>URI.parse()</em>. After this call, we have the XML of the RSS feed in <em>url_contents</em>. What we have to do now is build an RSS object with this XML. We'll do that by calling <em>RSS::Parser.parse()</em>. If you wish to do some modifications to the RSS contents, now is your change. In this simple example we'll simply bulk it all to the response.
</p>
<p>
To build the response, we need a JSON object. If everything went as expected, we can create a JSON object by simply creating a ruby associative array and calling the <em>to_json</em> method on it:
</p>
<p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">json</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"error"</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span> <span class="s2">"feed"</span> <span class="o">=&gt;</span> <span class="n">rss</span> <span class="p">}.</span><span class="nf">to_json</span></code></pre></figure>

</p>
<p>
If, on the contrary, we got an error (bad URL, bad RSS, whatever), we simply return the same JSON object with the <em>error</em> property set to true (that's done in the <em>rescue</em> clause).
</p>
<p>
After we have this JSON object built, we simply have to output the results. To do so, we use the help of a method called <em>render_json</em> which we have added to the controller code. In this method we simply output the JSON if we provide no callback (this means no JSONP), or either a padded JSON (hence the name JSONP) with the callback name followed by the JSON data. In either case we render the results as a <em>js</em> type.
</p>
<p>
For more detailed information on how JSONP works, check <a href="http://en.wikipedia.org/wiki/JSON#JSONP">http://en.wikipedia.org/wiki/JSON#JSONP</a>, but what you basically need to know is that when you do a JSONP request what you're really doing is retrieve a chunk of javascript code that will be run on your client, so be aware of the security issues you can have here.
</p>

        </div></li><li>
        <header class="post-header">
          <h1 class="post-title"><a class="post-link" href="/2011/02/18/installing-dropbox-and-dropbox-nautilus-in-archlinux/">Installing dropbox and dropbox-nautilus in ArchLinux</a></h1>

          <p class="post-meta">
            Feb 18, 2011• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Bernat Ràfales</span></span> • <a href="/categories/uncategorized/">Uncategorized</a> • <a href="/tags/archlinux/">archlinux</a>, <a href="/tags/dropbox/">dropbox</a>, <a href="/tags/gnome/">gnome</a>, <a href="/tags/linux/">linux</a>, <a href="/tags/nautilus/">nautilus</a></p>
        </header>

        <div class="post-content">
          <p>
If you've tried to install dropbox-nautilus from the source found in the &lt;a href=http://www.dropbox.com&gt;Dropbox&lt;/a&gt; website, you'll find that you can't successfully complete the ./configure step of the package due to an error of the script not finding pygtk. This is an issue with Archlinux because of the way python binaries are handled in this distribution. However, you can use the <a href="http://aur.archlinux.org">AUR</a> packages to install dropbox and its integration with Nautilus thank to the people that tweaked the scripts to work with Arch.
</p>
<p>
The first step you have to take is download the AUR packages. You'll need to download both <a href="http://aur.archlinux.org/packages.php?ID=23363">dropbox</a> and <a href="http://aur.archlinux.org/packages.php?ID=19615">nautilus-dropbox</a>. Save both .tar.gz files at you preferred location and uncompress them using this command:
</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">tar </span>xvfz &lt;filename.tar.gz&gt;</code></pre></figure>

<p>
Obviously, change <code>&lt;filename.tar.gz&gt;</code> with the filenames you have downloaded. Each tar command will create a folder. Go to the dropbox folder and run this package:
</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">makepkg <span class="nt">-s</span></code></pre></figure>

<p>
This will build a package and install the required dependencies while doing it if needed (it will ask for your root password if you're doing this without being root). If everything went ok, you'll find a file with the extension .xy in the folder you're in. This is what you need to install, using our beloved pacman (use <em>sudo</em> if you're not root):
</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pacman <span class="nt">-U</span> &lt;filename.xy&gt;</code></pre></figure>

<p>
This will install dropbox. After this, do the same for the other package: nautilus-dropbox. <em>makepkg -s</em>, <em>pacman -U &lt;filaneme.xy&gt;</em> and you're done, you have Dropbox integrated with Nautilus. Just start Dropbox from your <em>Applications</em> menu and enjoy the service!
</p>

        </div></li></ul>
  <div class="pagination">
    
      <a class="previous" href="/posts/26/">&laquo; Older</a>
    

    
      <a class="next" href="/posts/24/">Newer &raquo;</a>
    
  </div>

</div>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

Powered by <a href="https://jekyllrb.com">Jekyll</a>. Theme based on <a href="https://github.com/yous/whiteglass">whiteglass</a>
<br>
Subscribe via <a href="https://thinkingeek.com/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
